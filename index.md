---
marp: true
theme: default
paginate: true
---

# すべてのinputに可視ラベルがあれば
フロントエンドカンファレンス北海道2025 LT
株式会社SmartHR　maiha([@mt_dew2](https://x.com/mt_dew2))

---

- 今日はウェブアプリケーションで使う**入力要素とラベル**に関する話をします。

---

## 入力要素とは

- ユーザーに情報を入力させるUIコンポーネントのこと。
- HTML要素では `input`, `select`, `textarea`, `button`

<div style="text-align: center; margin-top: 2em">
<img src="./image/formcontrol.png" alt="input要素各種、select,textarea,buttonを並べた画像" style="width: 70%">
</div>

<!-- 
まず今日のキーワードの紹介です。
1つ目は、入力要素。ユーザーに入力をさせるためのUIコンポーネントのことです。
HTML要素でいうとinput、select、textarea,buttonなどのことです。
-->

---

## ラベルとは？

- 「何を入力するか」を**視覚的に**示すもの
- `input`, `select`, `textarea`では、ラベルを`label`でマークアップする
  - **ラベルと同じ内容がアクセシブルネームとして機械にも提供される**
<br>

```
<label for="name">氏名</label>
<input type="text" id="name" name="name"/>
```

<!--
そして2つめはラベルです。
ラベルは「入力要素に何を入力するか」を視覚的に示す役割をします。
そして、inputなどの入力要素ではlabel要素を使ってマークアップすることで
同じ情報をスクリーンリーダーを始めとした支援技術に伝えることができます。
-->

---

## なぜ正しくラベルを設定することが大事なの？

- ユーザーが迷わず入力できる：ユーザビリティ
- スクリーンリーダーなどにも情報が伝わる：アクセシビリティ
- 誤入力・意図しない情報の送信を防げる：セキュリティ

<!--
はい　ではなぜラベルが大事なのか？という話をします
今日ここにいるみなさんはご存知だと思いますが。
まず１つ目、ユーザーが迷わず入力できること。ユーザビリティに関わる部分。まあアクセシビリティにも関わりますね
２つめ　スクリーンリーダーなどの使用時にも情報が正しく伝わる。アクセシビリティ
３つめ、こちら意外と普段意識しないかもしれませんが、もしラベルが適切に設定されていないためにユーザーが本来送信しなくてよい・すべきでない情報を送信するというのは情報セキュリティのリスクといえます。というわけで、そういった観点でもラベルって重要なんですね。

-->

---

## 私が見た！ラベルがないがちなUI

<!--
はいここで、私が見た！ラベルがないがちなUIの第一位を発表します。ジャジャン
-->
---

### 第1位：selectをつかったプルダウンメニュー

- 表示内容・順序の切り替え、ページの移動などフォーム以外でも使われる
が、`select`は入力要素なのでラベルが必要
<div style="text-align: center; height:100%;">
  <img src="./image/select.webp" style="width:70%; margin-top: 1em;" alt="SmartHRの文書配付機能のスクリーンショット。すべての依頼と書かれたSelectが配置されている。">
</div>

<!--
第一位はSelect要素です。特にSelectを利用したプルダウンメニューでよく省略されることがあります。
原因としては、これ単純にドロップダウンメニューみたいな使い方がされてしまうんですね。まあ確かに似てはいるのですが。
このケースではほとんどこの選択した情報はサーバーに送信されたりしないんですね。表示切替とかに使われたりします。
なんですが、Selectは入力要素なので、ラベルがないと「ラベルのない"入力要素"」となってしまいますので
原則としてはNGです。
まあそして実際、これ何を選択するのSelectなのか、プルダウンの中身　選択肢を見るまでは特定しにくいですよね。
-->

---

<figcaption>ラベルをつけて改善</figcaption>
<figure>
  <img src="./image/select-after.webp" style="width: 90%;" alt="文書配付のスクリーンショット。Selectにはラベルがついている。">
</figure>
<!--
こういったSelect、SmartHRでもどんどん改善してまして、
Dropdownに置き換えるか、このような形で、役割がわかるようなラベルをつけたりしています。
-->

---

## まとめ1: 入力要素とラベル
- 原則: 入力要素には**ラベル**が必要（[3.3.2: ラベル又は説明](https://waic.jp/translations/WCAG21/Understanding/labels-or-instructions.html)）
- `label`などで、適切なマークアップをすれば、**アクセシブルネーム**としても提供される

  <!--
  では１つ目のまとめです。入力要素には原則としてラベルが必要です。これはWCAGだと3.3.2で、ユーザーに入力の期待値がわかるようにしろーというのがあります。
  また、label要素を使えば、同じ内容がaccessible nameとしても提供される。とても便利なので絶対label要素使いましょうね。
  -->

---

## ラベルがあるけどアクセシブルネームが漏れてしまうケース:sob:

---

### アクセシブルネーム漏れあるある: 分割されたinput :broken_heart:

電話番号や郵便番号など、複数のinputに分かれているケースで`label`は複数の`input`と紐づけられない。

<div style="text-align: center; display: flex; align-items: center;">
  <img src="./image/phonenumber.png" alt="電話番号の入力欄。3つのinputがある" width="52%"><img src="./image/postnumber.png" alt="郵便番号の入力欄。2つのinputがある。" width="48%">
</div>

- 見た目上は「何を入力すべきか」をラベルで伝えている
- 機械に伝えるにはアクセシブルネームが必要
  - 複数のinputを1つの`label`と紐づけできない:sob:

<!--
これまたよくあるのですがinputが分割されている場合ですね
label要素は複数のinputに紐づけができないので、電話番号や郵便番号の入力欄がハイフン区切りで分割されているような場合では
少し工夫が必要になります。
-->

---

### 解決方法: 各inputに`aria-label`を設定する

<div style="text-align: center;">
  <img src="./image/phonenumber-accessiblename.png" alt="3つに分割された電話番号の入力欄。1つ目のinputにカーソルがあたっていて、devtoolsのポップアップでアクセシビリティ情報が表示されている。Nameには「電話番号　市外局番」と入っている。" style="margin-top: 1em;" width="80%">
</div>

💡見た目上のラベルと同じ文言をアクセシブルネームに含める必要がある（[2.5.3: ラベルを含む名前](https://waic.jp/translations/WCAG21/Understanding/label-in-name.html)）

<!--
inputを分割しなければ、このような悩みは発生しないのですが
どうしても分割が必要な場合は、aria-labelなどを使ってそれぞれのinputにaccessible nameを付与する必要があります。このとき見た目上のラベルがaccessible nameにも含まれるように設定してください。
これはWCAGの2.5.3で含めてね♪となっています。
-->

---

## まとめ(2): ラベルとアクセシブルネーム

- ラベルは1個でも、アクセシブルネームはinputごとに必要
- アクセシブルネームにはラベルテキストを含めよう（[2.5.3: ラベルを含む名前](https://waic.jp/translations/WCAG21/Understanding/label-in-name.html)）
- 分割inputには気をつけよう:sob:
  - アクセシブルネームが漏れやすい
  - アクセシブルネームを検討するコストがかかる

<!--では本日のまとめ2です
アクセシブルネームは各input事に必要なので、分割inpuのときは気をつけてください。あとラベルに入っているテキストを含めてくださいというのは、こちらもWCAGの達成基準にありますので、後ほど見てみてください。
分割のinputを使わなければ、この悩みは不要になります。。
-->

---

## 本編！: 最近ラベル・アクセシブルネームに悩んだ入力UI

ここからは、ラベル・アクセシブルネームの付け方に悩んだものを紹介します！
といきたいのですが、LTの時間に収まらなかったので、あとでスライドをみて自分だったらどんなラベルをつけるか考えてみてください♪
<a href="#skip">飛ばす</a>

---

### 悩んだやつ1: 期間の入力

<img src="./image/splitinput2.png" alt="入社年月日というラベルがある、期間の入力欄。〜をセパレータとしてふたつのinputがならんでいる">

- 「入社年月日　開始日」「入社年月日　終了日」などのアクセシブルネームをつける
- 「開始日」「終了日」のラベルはつける？つけない？
- 「〜」で期間を表すのは日本だけなので翻訳時に注意が必要

<!-- 
そして、ちょっと番外編で最近SmartHRでよく見るUIを3つ紹介します。1つめが期間の入力です。波ダッシュで区切って期間の開始と終了を入力することを表しています。
ラベルは「入社年月日」となっていて、２つのinputには個別のラベルはついていません。この場合はaria-labelで開始日・終了日などのアクセシブルネームを提供します。
-->

---

### 悩んだやつ2: 条件の入力（範囲）

<img src="./image/splitinput1.png" alt="歳以上歳未満とかかれた年齢の入力欄。歳の前にinputがある。">

- 「年齢　下限値」「年齢　上限値」などのアクセシブルネームをつける
- 下限値・上限値のラベルは表示する？不可視にする？
- `aria-labelledby`を使って、ラベル＋input＋歳以上の3つを紐づけると「年齢◯歳以上」のように良い感じに読み上げられるかも（[参考: Labelling Controls](https://www.w3.org/WAI/tutorials/forms/labels/)）
- 「以上」「未満」などの表現は、他の言語への直訳に注意

<!--
こちらは範囲条件の入力UIです。
入力欄歳以上　入力欄歳未満という入力です。この場合はinputに「下限値」「上限値」などのAccessible Nameをつけることができます。
また、この入力ででてくる「以上・未満」などの言葉は、英語など他の言語では挿入すべき位置が数字の前だったり後だったりして、いろいろ考慮が必要になることにも注意してください。
-->

---

## 最近よく見るもの3: 条件の入力（条件文）

<img src="./image/splitinput3.png" alt="条件1という項目に3つの入力欄がある。入力はすべてコンボボックスで、2つ目と3つ目の入力の間に「の経験が」というテキストがある">

- 各項目に、あなたならどんなアクセシブルネームをつけますか？
- 可視のラベル、つけられそうですか？

<!--
そして最後に、文章型の条件入力です。
このUIの場合、条件1というテキストが全体のラベルの役割をしていそうですが、各入力欄にはどんなアクセシブルネームをつけるのがよいでしょうか？
このスクリーンショットの場合だと1つ目が条件の分類みたいなものなので「分類」、2つ目がマーケティング部とはいっているので「部署」3つ目が「あり」なので多分「有無」が固有の名前(アクセシブルネーム)かなーと思います。
これは今このスクショに値が入っているので、推測から個別のアクセシブルネームを考えてみましたが
値が空だったら、多分検討が難しかったと思います。
また可視ラベルをつけるのは、これは非常に難しいですね。今のUIのままラベルを入力欄の上部につける　みたいにすると、視覚的にゴチャゴチャしすぎて見えにくかったり入力に集中できなくなってしまう可能性があると思います。
-->

---

<h2 id="skip"> 最後のまとめ</h2>

- フォーム要素には入力の目的を説明する**ラベル**をつけよう！
- `label`要素でラベルをつけて、アクセシブルネームも提供しよう！
- 分割はやめよう
- 「すべてのinputに可視ラベルがあれば」アクセシブルネームに悩まなくていいんだけど

---

## ご清聴ありがとうございました！！
### アクセシビリティエンジニア募集中です！！！！
- アクセシビリティ分野での取り組みにおいて、強い思いのある方
- 自ら提案し、チャレンジすることが好きな方
- 多様なステークホルダーと協働できる方
- アクセシビリティを「やさしさ」と捉えず、仕組みとして多くの人へ提供したい方

[アクセシビリティエンジニア（シニア） / 株式会社SmartHR](https://open.talentio.com/r/1/c/smarthr/pages/87404)

---

## リンク集
- ラベルの付け方の例: [Labeling Controls | Web Accessibility Initiative (WAI) | W3C](https://www.w3.org/WAI/tutorials/forms/labels/)
- ラベルか説明をつけてねというWCAG達成基準: [3.3.2: ラベル又は説明](https://waic.jp/translations/WCAG21/Understanding/labels-or-instructions.html)
- アクセシブルネームにはラベルを含めようというWCAG達成基準: [2.5.3: ラベルを含む名前 (name) ](https://waic.jp/translations/WCAG21/Understanding/label-in-name.html)
- SmartHRでは、Inputをラップするコンポーネントを提供してラベル漏れを防いでいます: [FormControl | コンポーネント | SmartHR Design System](https://smarthr.design/products/components/form-control/)
